#!/bin/zsh
# shellcheck shell=bash

# shellcheck source=/dev/null
. "$(dirname $0)/_bootstrap.zsh"

export DOTFILES_VERBOSE=1

dotfiles_verify_settings

for module in $DOTFILES_MODULES; do
    EXEC_FILE_NAME="$DOTFILES_HOME/modules/$module/_setup.zsh"
    if [[ -x "$EXEC_FILE_NAME" ]]; then
        logging_info "Running $EXEC_FILE_NAME"
        source "$EXEC_FILE_NAME"
    elif [[ -e "$EXEC_FILE_NAME" ]]; then
        logging_status "$module: $EXEC_FILE_NAME exists but is not executable"
    else
        module_brew_bundle $module
    fi
done

echo "Now that setup has been run, please restart your terminal"
exit 2